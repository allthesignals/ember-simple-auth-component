define("ember-simple-auth",["./ember-simple-auth/core","./ember-simple-auth/session","./ember-simple-auth/authenticators","./ember-simple-auth/authorizers","./ember-simple-auth/stores","./ember-simple-auth/utils","./ember-simple-auth/mixins/application_route_mixin","./ember-simple-auth/mixins/authenticated_route_mixin","./ember-simple-auth/mixins/authentication_controller_mixin","./ember-simple-auth/mixins/login_controller_mixin","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=a.setup,m=a.initializeExtension,n=a.Configuration,o=b.Session,p=c.Authenticators,q=d.Authorizers,r=e.Stores,s=f.Utils,t=g.ApplicationRouteMixin,u=h.AuthenticatedRouteMixin,v=i.AuthenticationControllerMixin,w=j.LoginControllerMixin;k.setup=l,k.initializeExtension=m,k.Configuration=n,k.Session=o,k.Authenticators=p,k.Authorizers=q,k.Stores=r,k.Utils=s,k.ApplicationRouteMixin=t,k.AuthenticatedRouteMixin=u,k.AuthenticationControllerMixin=v,k.LoginControllerMixin=w}),define("ember-simple-auth/authenticators",["./authenticators/base","exports"],function(a,b){"use strict";var c=a.Base,d={Base:c};b.Authenticators=d}),define("ember-simple-auth/authenticators/base",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Object.extend(c.Evented,{restore:function(){return new c.RSVP.reject},authenticate:function(){return new c.RSVP.reject},invalidate:function(){return new c.RSVP.resolve}});a.Base=d}),define("ember-simple-auth/authorizers",["./authorizers/base","exports"],function(a,b){"use strict";var c=a.Base,d={Base:c};b.Authorizers=d}),define("ember-simple-auth/authorizers/base",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Object.extend({session:null,authorize:function(){}});a.Base=d}),define("ember-simple-auth/core",["./session","./stores","exports"],function(a,b,c){"use strict";function d(a){if("string"===Ember.typeOf(a)){var b=document.createElement("a");b.href=a,b.href=b.href,a=b}var c=a.port;return Ember.isEmpty(c)&&(c="http:"===a.protocol?"80":"https:"===a.protocol?"443":""),a.protocol+"//"+a.hostname+(""!==c?":"+c:"")}function e(a){var b=j[a]=j[a]||d(a);return g.indexOf(b)>-1||b===k}function f(a,b){var c=h.create({store:a,container:b}),d=b.lookup("router:main");return Ember.A(["sessionAuthenticationSucceeded","sessionAuthenticationFailed","sessionInvalidationSucceeded","sessionInvalidationFailed"]).forEach(function(a){c.on(a,function(b){d.send(a,b)})}),c}var g,h=a.Session,i=b.registerStores,j={},k=d(window.location),l=[],m={authenticationRoute:"login",routeAfterAuthentication:"index",sessionPropertyName:"session",applicationRootUrl:null},n=function(a,b,c){b.deferReadiness(),i(a),l.forEach(function(d){d(a,b,c)}),c=c||{},m.routeAfterAuthentication=c.routeAfterAuthentication||m.routeAfterAuthentication,m.authenticationRoute=c.authenticationRoute||m.authenticationRoute,m.sessionPropertyName=c.sessionPropertyName||m.sessionPropertyName,m.applicationRootUrl=a.lookup("router:main").get("rootURL")||"/",g=Ember.A(c.crossOriginWhitelist||[]).map(function(a){return d(a)}),c.storeFactory=c.storeFactory||"ember-simple-auth-session-store:local-storage";var h=a.lookup(c.storeFactory),j=f(h,a);if(a.register("ember-simple-auth-session:main",j,{instantiate:!1}),Ember.A(["controller","route"]).forEach(function(b){a.injection(b,m.sessionPropertyName,"ember-simple-auth-session:main")}),Ember.isEmpty(c.authorizerFactory))Ember.Logger.debug("No authorizer factory was specified for Ember.SimpleAuth - specify one if backend requests need to be authorized.");else{var k=a.lookup(c.authorizerFactory);k&&(k.set("session",j),Ember.$.ajaxPrefilter(function(a,b,c){e(a.url)&&k.authorize(c,a)}))}var n=function(){b.advanceReadiness()};j.restore().then(n,n)},o=function(a){l.push(a)};c.setup=n,c.initializeExtension=o,c.Configuration=m}),define("ember-simple-auth/mixins/application_route_mixin",["./../core","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Configuration,f=d.Mixin.create({actions:{authenticateSession:function(){this.transitionTo(e.authenticationRoute)},sessionAuthenticationSucceeded:function(){var a=this.get(e.sessionPropertyName).get("attemptedTransition");a?(a.retry(),this.get(e.sessionPropertyName).set("attemptedTransition",null)):this.transitionTo(e.routeAfterAuthentication)},sessionAuthenticationFailed:function(){},invalidateSession:function(){this.get(e.sessionPropertyName).invalidate()},sessionInvalidationSucceeded:function(){window.location.replace(e.applicationRootUrl)},sessionInvalidationFailed:function(){},authorizationFailed:function(){this.get(e.sessionPropertyName).invalidate()},error:function(a){return 401===a.status&&this.send("authorizationFailed"),!0}}});b.ApplicationRouteMixin=f}),define("ember-simple-auth/mixins/authenticated_route_mixin",["./../core","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Configuration,f=d.Mixin.create({beforeModel:function(a){this.get(e.sessionPropertyName).get("isAuthenticated")||(a.abort(),this.get(e.sessionPropertyName).set("attemptedTransition",a),a.send("authenticateSession"))}});b.AuthenticatedRouteMixin=f}),define("ember-simple-auth/mixins/authentication_controller_mixin",["./../core","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Configuration,f=d.Mixin.create({authenticatorFactory:null,actions:{authenticate:function(a){this.get(e.sessionPropertyName).authenticate(this.get("authenticatorFactory"),a)}}});b.AuthenticationControllerMixin=f}),define("ember-simple-auth/mixins/login_controller_mixin",["./../core","./authentication_controller_mixin","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=(a.Configuration,b.AuthenticationControllerMixin),g=e.Mixin.create(f,{actions:{authenticate:function(){var a=this.getProperties("identification","password");this.set("password",null),this._super(a)}}});c.LoginControllerMixin=g}),define("ember-simple-auth/session",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.ObjectProxy.extend(c.Evented,{authenticatorFactory:null,store:null,isAuthenticated:!1,attemptedTransition:null,content:{},init:function(){this.bindToStoreEvents()},authenticate:function(a,b){c.assert("Session#authenticate requires the authenticator factory to be specified, was "+a,!c.isEmpty(a));var d=this;return new c.RSVP.Promise(function(c,e){d.container.lookup(a).authenticate(b).then(function(b){d.setup(a,b,!0),c()},function(a){d.clear(),d.trigger("sessionAuthenticationFailed",a),e(a)})})},invalidate:function(){var a=this;return new c.RSVP.Promise(function(b,c){var d=a.container.lookup(a.authenticatorFactory);d.invalidate(a.content).then(function(){d.off("updated"),a.clear(!0),b()},function(b){a.trigger("sessionInvalidationFailed",b),c(b)})})},restore:function(){var a=this;return new c.RSVP.Promise(function(b,c){var d=a.store.restore(),e=d.authenticatorFactory;e?(delete d.authenticatorFactory,a.container.lookup(e).restore(d).then(function(c){a.setup(e,c),b()},function(){a.store.clear(),c()})):(a.store.clear(),c())})},setup:function(a,b,d){d=!!d&&!this.get("isAuthenticated"),this.setProperties({isAuthenticated:!0,authenticatorFactory:a,content:b}),this.bindToAuthenticatorEvents();var e=c.$.extend({authenticatorFactory:a},this.content);this.store.replace(e),d&&this.trigger("sessionAuthenticationSucceeded")},clear:function(a){a=!!a&&this.get("isAuthenticated"),this.setProperties({isAuthenticated:!1,authenticatorFactory:null,content:{}}),this.store.clear(),a&&this.trigger("sessionInvalidationSucceeded")},bindToAuthenticatorEvents:function(){var a=this,b=this.container.lookup(this.authenticatorFactory);b.off("updated"),b.off("invalidated"),b.on("updated",function(b){a.setup(a.authenticatorFactory,b)}),b.on("invalidated",function(){a.clear(!0)})},bindToStoreEvents:function(){var a=this;this.store.on("updated",function(b){var c=b.authenticatorFactory;c?(delete b.authenticatorFactory,a.container.lookup(c).restore(b).then(function(b){a.setup(c,b,!0)},function(){a.clear(!0)})):a.clear(!0)})}});a.Session=d}),define("ember-simple-auth/stores",["./stores/base","./stores/local_storage","./stores/ephemeral","exports"],function(a,b,c,d){"use strict";var e=a.Base,f=b.LocalStorage,g=c.Ephemeral,h={Base:e,LocalStorage:f,Ephemeral:g},i=function(a){a.register("ember-simple-auth-session-store:local-storage",f),a.register("ember-simple-auth-session-store:ephemeral",g)};d.registerStores=i,d.Stores=h}),define("ember-simple-auth/stores/base",["../utils/flat_objects_are_equal","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.flatObjectsAreEqual,f=d.Object.extend(d.Evented,{persist:function(){},restore:function(){return{}},replace:function(a){e(a,this.restore())||(this.clear(),this.persist(a))},clear:function(){}});b.Base=f}),define("ember-simple-auth/stores/ephemeral",["./base","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Base,f=e.extend({init:function(){this.clear()},persist:function(a){this._data=d.$.extend(a,this._data)},restore:function(){return d.$.extend({},this._data)},clear:function(){delete this._data,this._data={}}});b.Ephemeral=f}),define("ember-simple-auth/stores/local_storage",["./base","../utils/flat_objects_are_equal","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.flatObjectsAreEqual,h=f.extend({keyPrefix:"ember_simple_auth:",_triggerChangeEventTimeout:null,init:function(){this.bindToStorageEvents()},persist:function(a){for(var b in a){var c=this.buildStorageKey(b);localStorage.setItem(c,a[b])}this._lastData=this.restore()},restore:function(){var a=this,b={};return this.knownKeys().forEach(function(c){var d=c.replace(a.keyPrefix,"");b[d]=localStorage.getItem(c)}),b},clear:function(){this.knownKeys().forEach(function(a){localStorage.removeItem(a)}),this._lastData=null},buildStorageKey:function(a){return this.keyPrefix+a},knownKeys:function(){for(var a=e.A([]),b=0,c=localStorage.length;c>b;b++){var d=localStorage.key(b);0===d.indexOf(this.keyPrefix)&&a.push(d)}return a},bindToStorageEvents:function(){var a=this;e.$(window).bind("storage",function(){var b=a.restore();g(b,a._lastData)||(a._lastData=b,e.run.cancel(a._triggerChangeEventTimeout),a._triggerChangeEventTimeout=e.run.next(a,function(){this.trigger("updated",b)}))})}});c.LocalStorage=h}),define("ember-simple-auth/utils",["./utils/is_secure_url","./utils/flat_objects_are_equal","exports"],function(a,b,c){"use strict";var d=a.isSecureUrl,e=b.flatObjectsAreEqual,f={isSecureUrl:d,flatObjectsAreEqual:e};c.Utils=f}),define("ember-simple-auth/utils/flat_objects_are_equal",["exports"],function(a){"use strict";var b=function(a,b){function c(a){var b=[];for(var c in a)b.push([c,a[c]]);return b.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0})}return JSON.stringify(c(a))===JSON.stringify(c(b))};a.flatObjectsAreEqual=b}),define("ember-simple-auth/utils/is_secure_url",["exports"],function(a){"use strict";var b=function(a){var b=document.createElement("a");return b.href=a,b.href=b.href,"https:"==b.protocol};a.isSecureUrl=b});