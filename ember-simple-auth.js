!function(a){var b,c;!function(){var a={},d={};b=function(b,c,d){a[b]={deps:c,callback:d}},c=function(b){function e(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d.hasOwnProperty(b))return d[b];if(d[b]={},!a[b])throw new Error("Could not find module "+b);for(var f,g=a[b],h=g.deps,i=g.callback,j=[],k=0,l=h.length;l>k;k++)j.push("exports"===h[k]?f={}:c(e(h[k])));var m=i.apply(this,j);return d[b]=f||m},c.registry=a}(),b("ember-simple-auth",["./ember-simple-auth/core","./ember-simple-auth/session","./ember-simple-auth/authenticators","./ember-simple-auth/authorizers","./ember-simple-auth/stores","./ember-simple-auth/mixins/application_route_mixin","./ember-simple-auth/mixins/authenticated_route_mixin","./ember-simple-auth/mixins/authentication_controller_mixin","./ember-simple-auth/mixins/login_controller_mixin","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=a.setup,l=a.Configuration,m=b.Session,n=c.Authenticators,o=d.Authorizers,p=e.Stores,q=f.ApplicationRouteMixin,r=g.AuthenticatedRouteMixin,s=h.AuthenticationControllerMixin,t=i.LoginControllerMixin;j.setup=k,j.Configuration=l,j.Session=m,j.Authenticators=n,j.Authorizers=o,j.Stores=p,j.ApplicationRouteMixin=q,j.AuthenticatedRouteMixin=r,j.AuthenticationControllerMixin=s,j.LoginControllerMixin=t}),b("ember-simple-auth/authenticators",["./authenticators/base","./authenticators/oauth2","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.OAuth2,h=e.Namespace.create({Base:f,OAuth2:g});c.Authenticators=h}),b("ember-simple-auth/authenticators/base",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Object.extend(c.Evented,{restore:function(){return new c.RSVP.reject},authenticate:function(){return new c.RSVP.reject},invalidate:function(){return new c.RSVP.resolve}});a.Base=d}),b("ember-simple-auth/authenticators/oauth2",["./base","../utils/is_secure_url","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.isSecureUrl,h=f.extend({serverTokenEndpoint:"/token",refreshAccessTokens:!0,_refreshTokenTimeout:null,restore:function(a){var b=this;return new e.RSVP.Promise(function(c,d){if(e.isEmpty(a.access_token))d();else{var f=(new Date).getTime();!e.isEmpty(a.expires_at)&&a.expires_at<f?d():(b.scheduleAccessTokenRefresh(a.expires_in,a.expires_at,a.refresh_token),c(a))}})},authenticate:function(a){var b=this;return new e.RSVP.Promise(function(c,d){var f={grant_type:"password",username:a.identification,password:a.password};b.makeRequest(f).then(function(a){e.run(function(){var d=b.absolutizeExpirationTime(a.expires_in);b.scheduleAccessTokenRefresh(a.expires_in,d,a.refresh_token),c(e.$.extend(a,{expires_at:d}))})},function(a){e.run(function(){d(a.responseJSON||a.responseText)})})})},invalidate:function(){return e.run.cancel(this._refreshTokenTimeout),delete this._refreshTokenTimeout,new e.RSVP.resolve},makeRequest:function(a){return g(this.serverTokenEndpoint)||e.Logger.warn("Credentials are transmitted via an insecure connection - use HTTPS to keep them secure."),e.$.ajax({url:this.serverTokenEndpoint,type:"POST",data:a,dataType:"json",contentType:"application/x-www-form-urlencoded"})},scheduleAccessTokenRefresh:function(a,b,c){if(this.refreshAccessTokens){var d=(new Date).getTime();e.isEmpty(b)&&!e.isEmpty(a)&&(b=new Date(d+1e3*(a-5)).getTime()),!e.isEmpty(c)&&!e.isEmpty(b)&&b>d&&(e.run.cancel(this._refreshTokenTimeout),delete this._refreshTokenTimeout,this._refreshTokenTimeout=e.run.later(this,this.refreshAccessToken,a,c,b-d))}},refreshAccessToken:function(a,b){var c=this,d={grant_type:"refresh_token",refresh_token:b};this.makeRequest(d).then(function(d){e.run(function(){a=d.expires_in||a,b=d.refresh_token||b;var f=c.absolutizeExpirationTime(a);c.scheduleAccessTokenRefresh(a,null,b),c.trigger("ember-simple-auth:session-updated",e.$.extend(d,{expires_in:a,expires_at:f,refresh_token:b}))})},function(a,b,c){e.Logger.warn("Access token could not be refreshed - server responded with "+c+".")})},absolutizeExpirationTime:function(a){return e.isEmpty(a)?void 0:new Date((new Date).getTime()+1e3*(a-5)).getTime()}});c.OAuth2=h}),b("ember-simple-auth/authorizers",["./authorizers/base","./authorizers/oauth2","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.OAuth2,h=e.Namespace.create({Base:f,OAuth2:g});c.Authorizers=h}),b("ember-simple-auth/authorizers/base",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Object.extend({session:null,authorize:function(){}});a.Base=d}),b("ember-simple-auth/authorizers/oauth2",["./base","../utils/is_secure_url","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.isSecureUrl,h=f.extend({authorize:function(a,b){this.get("session.isAuthenticated")&&!e.isEmpty(this.get("session.access_token"))&&(g(b.url)||e.Logger.warn("Credentials are transmitted via an insecure connection - use HTTPS to keep them secure."),a.setRequestHeader("Authorization","Bearer "+this.get("session.access_token")))}});c.OAuth2=h}),b("ember-simple-auth/core",["./session","./authenticators","./authorizers","./stores","exports"],function(a,b,c,d,e){"use strict";function f(a){if("string"===Ember.typeOf(a)){var b=document.createElement("a");b.href=a,b.href=b.href,a=b}var c=a.port;return Ember.isEmpty(c)&&(c="http:"===a.protocol?"80":"https:"===a.protocol?"443":""),a.protocol+"//"+a.hostname+(""!==c?":"+c:"")}function g(a){var b=m[a]=m[a]||f(a);return h.indexOf(b)>-1||b===n}var h,i=a.Session,j=b.Authenticators,k=c.Authorizers,l=d.Stores,m={},n=f(window.location),o=Ember.Namespace.create({authenticationRoute:"login",routeAfterAuthentication:"index",applicationRootUrl:null}),p=function(a,b,c){c=c||{},o.routeAfterAuthentication=c.routeAfterAuthentication||o.routeAfterAuthentication,o.authenticationRoute=c.authenticationRoute||o.authenticationRoute,o.applicationRootUrl=a.lookup("router:main").get("rootURL")||"/",h=Ember.A(c.crossOriginWhitelist||[]).map(function(a){return f(a)}),a.register("ember-simple-auth:authenticators:oauth2",j.OAuth2);var d=(c.store||l.LocalStorage).create(),e=i.create({store:d,container:a}),m=(c.authorizer||k.OAuth2).create({session:e});a.register("ember-simple-auth:session:current",e,{instantiate:!1}),Ember.A(["model","controller","view","route"]).forEach(function(b){a.injection(b,"session","ember-simple-auth:session:current")}),Ember.$.ajaxPrefilter(function(a,b,c){g(a.url)&&m.authorize(c,a)})};e.setup=p,e.Configuration=o}),b("ember-simple-auth/mixins/application_route_mixin",["./../core","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Configuration,f=d.Mixin.create({activate:function(){var a=this;this._super(),this.get("session").on("ember-simple-auth:session-authentication-succeeded",function(){a.send("sessionAuthenticationSucceeded")}),this.get("session").on("ember-simple-auth:session-authentication-failed",function(b){a.send("sessionAuthenticationFailed",b)}),this.get("session").on("ember-simple-auth:session-invalidation-succeeded",function(){a.send("sessionInvalidationSucceeded")}),this.get("session").on("ember-simple-auth:session-invalidation-failed",function(b){a.send("sessionInvalidationFailed",b)})},actions:{authenticateSession:function(){this.transitionTo(e.authenticationRoute)},sessionAuthenticationSucceeded:function(){var a=this.get("session.attemptedTransition");a?(a.retry(),this.set("session.attemptedTransition",null)):this.transitionTo(e.routeAfterAuthentication)},sessionAuthenticationFailed:function(){},invalidateSession:function(){this.get("session").invalidate()},sessionInvalidationSucceeded:function(){window.location.replace(e.applicationRootUrl)},sessionInvalidationFailed:function(){},authorizationFailed:function(){this.get("session").invalidate()},error:function(a){return 401===a.status&&this.send("authorizationFailed"),!0}}});b.ApplicationRouteMixin=f}),b("ember-simple-auth/mixins/authenticated_route_mixin",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Mixin.create({beforeModel:function(a){this.get("session.isAuthenticated")||(a.abort(),this.set("session.attemptedTransition",a),a.send("authenticateSession"))}});a.AuthenticatedRouteMixin=d}),b("ember-simple-auth/mixins/authentication_controller_mixin",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Mixin.create({authenticatorFactory:null,actions:{authenticate:function(a){this.get("session").authenticate(this.get("authenticatorFactory"),a)}}});a.AuthenticationControllerMixin=d}),b("ember-simple-auth/mixins/login_controller_mixin",["./authentication_controller_mixin","../authenticators/oauth2","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.AuthenticationControllerMixin,g=(b.OAuth2,e.Mixin.create(f,{authenticatorFactory:"ember-simple-auth:authenticators:oauth2",actions:{authenticate:function(){var a=this.getProperties("identification","password");e.isEmpty(a.identification)||e.isEmpty(a.password)||(this.set("password",null),this._super(a))}}}));c.LoginControllerMixin=g}),b("ember-simple-auth/session",["./utils/flat_objects_are_equal","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.flatObjectsAreEqual,f=d.ObjectProxy.extend(d.Evented,{authenticatorFactory:null,store:null,isAuthenticated:!1,attemptedTransition:null,content:{},init:function(){var a=this;this.bindToStoreEvents();var b=this.store.restore(),c=b.authenticatorFactory;c?(delete b.authenticatorFactory,this.container.lookup(c).restore(b).then(function(b){a.setup(c,b)},function(){a.store.clear()})):this.store.clear()},authenticate:function(a,b){var c=this;return new d.RSVP.Promise(function(d,e){c.container.lookup(a).authenticate(b).then(function(b){c.setup(a,b,!0),d()},function(a){c.clear(),c.trigger("ember-simple-auth:session-authentication-failed",a),e(a)})})},invalidate:function(){var a=this;return new d.RSVP.Promise(function(b,c){var d=a.container.lookup(a.authenticatorFactory);d.invalidate(a.content).then(function(){d.off("ember-simple-auth:session-updated"),a.clear(!0),b()},function(b){a.trigger("ember-simple-auth:session-invalidation-failed",b),c(b)})})},setup:function(a,b,c){c=!!c&&!this.get("isAuthenticated"),this.setProperties({isAuthenticated:!0,authenticatorFactory:a,content:b}),this.bindToAuthenticatorEvents();var f=d.$.extend({authenticatorFactory:a},this.content);e(f,this.store.restore())||(this.store.clear(),this.store.persist(f)),c&&this.trigger("ember-simple-auth:session-authentication-succeeded")},clear:function(a){a=!!a&&this.get("isAuthenticated"),this.setProperties({isAuthenticated:!1,authenticatorFactory:null,content:{}}),this.store.clear(),a&&this.trigger("ember-simple-auth:session-invalidation-succeeded")},bindToAuthenticatorEvents:function(){var a=this,b=this.container.lookup(this.authenticatorFactory);b.off("ember-simple-auth:session-updated"),b.on("ember-simple-auth:session-updated",function(b){a.setup(a.authenticatorFactory,b)})},bindToStoreEvents:function(){var a=this;this.store.on("ember-simple-auth:session-updated",function(b){var c=b.authenticatorFactory;c?(delete b.authenticatorFactory,a.container.lookup(c).restore(b).then(function(b){a.setup(c,b,!0)},function(){a.clear(!0)})):a.clear(!0)})}});b.Session=f}),b("ember-simple-auth/stores",["./stores/base","./stores/cookie","./stores/local_storage","./stores/ephemeral","exports"],function(a,b,c,d,e){"use strict";var f="undefined"!=typeof window?window:{},g=f.Ember,h=a.Base,i=b.Cookie,j=c.LocalStorage,k=d.Ephemeral,l=g.Namespace.create({Base:h,Cookie:i,LocalStorage:j,Ephemeral:k});e.Stores=l}),b("ember-simple-auth/stores/base",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Object.extend(c.Evented,{persist:function(){},restore:function(){return{}},clear:function(){}});a.Base=d}),b("ember-simple-auth/stores/cookie",["./base","../utils/flat_objects_are_equal","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.flatObjectsAreEqual,h=f.extend({cookieNamePrefix:"ember_simple_auth:",_secureCookies:"https:"===window.location.protocol,_syncDataTimeout:null,init:function(){this.syncData()},persist:function(a){for(var b in a)this.write(b,a[b],null);this._lastData=this.restore()},restore:function(){var a=this,b={};return this.knownCookies().forEach(function(c){b[c]=a.read(c)}),b},clear:function(){var a=this;this.knownCookies().forEach(function(b){a.write(b,null,new Date(0).toGMTString())}),this._lastData=null},read:function(a){var b=document.cookie.match(new RegExp(this.cookieNamePrefix+a+"=([^;]+)"))||[];return decodeURIComponent(b[1]||"")},write:function(a,b,c){var d=e.isEmpty(c)?"":"; expires="+c,f=this._secureCookies?";secure":"";document.cookie=this.cookieNamePrefix+a+"="+encodeURIComponent(b)+d+f},knownCookies:function(){var a=this;return e.A(document.cookie.split(/[=;\s]+/)).filter(function(b){return new RegExp("^"+a.cookieNamePrefix).test(b)}).map(function(b){return b.replace(a.cookieNamePrefix,"")})},syncData:function(){var a=this.restore();g(a,this._lastData)||(this._lastData=a,this.trigger("ember-simple-auth:session-updated",a)),e.testing||(e.run.cancel(this._syncDataTimeout),this._syncDataTimeout=e.run.later(this,this.syncData,500))}});c.Cookie=h}),b("ember-simple-auth/stores/ephemeral",["./base","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Base,f=e.extend({init:function(){this.clear()},persist:function(a){this._data=d.$.extend(a,this._data)},restore:function(){return d.$.extend({},this._data)},clear:function(){delete this._data,this._data={}}});b.Ephemeral=f}),b("ember-simple-auth/stores/local_storage",["./base","../utils/flat_objects_are_equal","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.flatObjectsAreEqual,h=f.extend({keyPrefix:"ember_simple_auth:",_triggerChangeEventTimeout:null,init:function(){this.bindToStorageEvents()},persist:function(a){for(var b in a){var c=this.buildStorageKey(b);localStorage.setItem(c,a[b])}this._lastData=this.restore()},restore:function(){var a=this,b={};return this.knownKeys().forEach(function(c){var d=c.replace(a.keyPrefix,"");b[d]=localStorage.getItem(c)}),b},clear:function(){this.knownKeys().forEach(function(a){localStorage.removeItem(a)}),this._lastData=null},buildStorageKey:function(a){return this.keyPrefix+a},knownKeys:function(){for(var a=e.A([]),b=0,c=localStorage.length;c>b;b++){var d=localStorage.key(b);0===d.indexOf(this.keyPrefix)&&a.push(d)}return a},bindToStorageEvents:function(){var a=this;e.$(window).bind("storage",function(){var b=a.restore();g(b,a._lastData)||(a._lastData=b,e.run.cancel(a._triggerChangeEventTimeout),a._triggerChangeEventTimeout=e.run.next(a,function(){this.trigger("ember-simple-auth:session-updated",b)}))})}});c.LocalStorage=h}),b("ember-simple-auth/utils/flat_objects_are_equal",["exports"],function(a){"use strict";var b=function(a,b){function c(a){var b=[];for(var c in a)b.push([c,a[c]]);return b.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0})}return JSON.stringify(c(a))===JSON.stringify(c(b))};a.flatObjectsAreEqual=b}),b("ember-simple-auth/utils/is_secure_url",["exports"],function(a){"use strict";var b=function(){var a=document.createElement("a");return a.href=location,a.href=a.href,"https:"==a.protocol};a.isSecureUrl=b}),a.Ember.SimpleAuth=c("ember-simple-auth")}("undefined"!=typeof global?global:window);